var dt=Object.defineProperty;var vt=(t,e,n)=>e in t?dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>vt(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var ue,p,Ve,Ge,N,De,Be,de,Se,ve,he,j={},qe=[],ht=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ge=Array.isArray;function C(t,e){for(var n in e)t[n]=e[n];return t}function Ye(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function pt(t,e,n){var i,o,r,a={};for(r in e)r=="key"?i=e[r]:r=="ref"?o=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?ue.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)a[r]===void 0&&(a[r]=t.defaultProps[r]);return ee(t,a,i,o,null)}function ee(t,e,n,i,o){var r={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Ve,__i:-1,__u:0};return o==null&&p.vnode!=null&&p.vnode(r),r}function se(t){return t.children}function q(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function je(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return je(t)}}function Pe(t){(!t.__d&&(t.__d=!0)&&N.push(t)&&!ne.__r++||De!==p.debounceRendering)&&((De=p.debounceRendering)||Be)(ne)}function ne(){var t,e,n,i,o,r,a,l;for(N.sort(de);t=N.shift();)t.__d&&(e=N.length,i=void 0,r=(o=(n=t).__v).__e,a=[],l=[],n.__P&&((i=C({},o)).__v=o.__v+1,p.vnode&&p.vnode(i),Ae(n.__P,i,o,n.__n,n.__P.namespaceURI,32&o.__u?[r]:null,a,r??I(o),!!(32&o.__u),l),i.__v=o.__v,i.__.__k[i.__i]=i,Ke(a,i,l),i.__e!=r&&je(i)),N.length>e&&N.sort(de));ne.__r=0}function ze(t,e,n,i,o,r,a,l,c,_,d){var u,m,f,g,D,L=i&&i.__k||qe,S=e.length;for(n.__d=c,yt(n,e,L),c=n.__d,u=0;u<S;u++)(f=n.__k[u])!=null&&(m=f.__i===-1?j:L[f.__i]||j,f.__i=u,Ae(t,f,m,o,r,a,l,c,_,d),g=f.__e,f.ref&&m.ref!=f.ref&&(m.ref&&ke(m.ref,null,f),d.push(f.ref,f.__c||g,f)),D==null&&g!=null&&(D=g),65536&f.__u||m.__k===f.__k?c=Qe(f,c,t):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:g&&(c=g.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=D}function yt(t,e,n){var i,o,r,a,l,c=e.length,_=n.length,d=_,u=0;for(t.__k=[],i=0;i<c;i++)(o=e[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(a=i+u,(o=t.__k[i]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?ee(null,o,null,null,null):ge(o)?ee(se,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?ee(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,r=null,(l=o.__i=mt(o,n,a,d))!==-1&&(d--,(r=n[l])&&(r.__u|=131072)),r==null||r.__v===null?(l==-1&&u--,typeof o.type!="function"&&(o.__u|=65536)):l!==a&&(l==a-1?u--:l==a+1?u++:(l>a?u--:u++,o.__u|=65536))):o=t.__k[i]=null;if(d)for(i=0;i<_;i++)(r=n[i])!=null&&!(131072&r.__u)&&(r.__e==t.__d&&(t.__d=I(r)),Ze(r,r))}function Qe(t,e,n){var i,o;if(typeof t.type=="function"){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,e=Qe(i[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function mt(t,e,n,i){var o=t.key,r=t.type,a=n-1,l=n+1,c=e[n];if(c===null||c&&o==c.key&&r===c.type&&!(131072&c.__u))return n;if(i>(c!=null&&!(131072&c.__u)?1:0))for(;a>=0||l<e.length;){if(a>=0){if((c=e[a])&&!(131072&c.__u)&&o==c.key&&r===c.type)return a;a--}if(l<e.length){if((c=e[l])&&!(131072&c.__u)&&o==c.key&&r===c.type)return l;l++}}return-1}function we(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||ht.test(e)?n:n+"px"}function J(t,e,n,i,o){var r;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||we(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||we(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?i?n.u=i.u:(n.u=Se,t.addEventListener(e,r?he:ve,r)):t.removeEventListener(e,r?he:ve,r);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ee(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Se++;else if(e.t<n.u)return;return n(p.event?p.event(e):e)}}}function Ae(t,e,n,i,o,r,a,l,c,_){var d,u,m,f,g,D,L,S,A,V,E,Q,G,Te,K,ae,P=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),r=[l=e.__e=n.__e]),(d=p.__b)&&d(e);e:if(typeof P=="function")try{if(S=e.props,A="prototype"in P&&P.prototype.render,V=(d=P.contextType)&&i[d.__c],E=d?V?V.props.value:d.__:i,n.__c?L=(u=e.__c=n.__c).__=u.__E:(A?e.__c=u=new P(S,E):(e.__c=u=new q(S,E),u.constructor=P,u.render=gt),V&&V.sub(u),u.props=S,u.state||(u.state={}),u.context=E,u.__n=i,m=u.__d=!0,u.__h=[],u._sb=[]),A&&u.__s==null&&(u.__s=u.state),A&&P.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=C({},u.__s)),C(u.__s,P.getDerivedStateFromProps(S,u.__s))),f=u.props,g=u.state,u.__v=e,m)A&&P.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),A&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(A&&P.getDerivedStateFromProps==null&&S!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(S,E),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(S,u.__s,E)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(u.props=S,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),Q=0;Q<u._sb.length;Q++)u.__h.push(u._sb[Q]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(S,u.__s,E),A&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,g,D)})}if(u.context=E,u.props=S,u.__P=t,u.__e=!1,G=p.__r,Te=0,A){for(u.state=u.__s,u.__d=!1,G&&G(e),d=u.render(u.props,u.state,u.context),K=0;K<u._sb.length;K++)u.__h.push(u._sb[K]);u._sb=[]}else do u.__d=!1,G&&G(e),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++Te<25);u.state=u.__s,u.getChildContext!=null&&(i=C(C({},i),u.getChildContext())),A&&!m&&u.getSnapshotBeforeUpdate!=null&&(D=u.getSnapshotBeforeUpdate(f,g)),ze(t,ge(ae=d!=null&&d.type===se&&d.key==null?d.props.children:d)?ae:[ae],e,n,i,o,r,a,l,c,_),u.base=e.__e,e.__u&=-161,u.__h.length&&a.push(u),L&&(u.__E=u.__=null)}catch(Z){if(e.__v=null,c||r!=null){for(e.__u|=c?160:32;l&&l.nodeType===8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,e.__e=l}else e.__e=n.__e,e.__k=n.__k;p.__e(Z,e,n)}else r==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=St(n.__e,e,n,i,o,r,a,c,_);(d=p.diffed)&&d(e)}function Ke(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)ke(n[i],n[++i],n[++i]);p.__c&&p.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(r){r.call(o)})}catch(r){p.__e(r,o.__v)}})}function St(t,e,n,i,o,r,a,l,c){var _,d,u,m,f,g,D,L=n.props,S=e.props,A=e.type;if(A==="svg"?o="http://www.w3.org/2000/svg":A==="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(_=0;_<r.length;_++)if((f=r[_])&&"setAttribute"in f==!!A&&(A?f.localName===A:f.nodeType===3)){t=f,r[_]=null;break}}if(t==null){if(A===null)return document.createTextNode(S);t=document.createElementNS(o,A,S.is&&S),l&&(p.__m&&p.__m(e,r),l=!1),r=null}if(A===null)L===S||l&&t.data===S||(t.data=S);else{if(r=r&&ue.call(t.childNodes),L=n.props||j,!l&&r!=null)for(L={},_=0;_<t.attributes.length;_++)L[(f=t.attributes[_]).name]=f.value;for(_ in L)if(f=L[_],_!="children"){if(_=="dangerouslySetInnerHTML")u=f;else if(!(_ in S)){if(_=="value"&&"defaultValue"in S||_=="checked"&&"defaultChecked"in S)continue;J(t,_,null,f,o)}}for(_ in S)f=S[_],_=="children"?m=f:_=="dangerouslySetInnerHTML"?d=f:_=="value"?g=f:_=="checked"?D=f:l&&typeof f!="function"||L[_]===f||J(t,_,f,L[_],o);if(d)l||u&&(d.__html===u.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(u&&(t.innerHTML=""),ze(t,ge(m)?m:[m],e,n,i,A==="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,a,r?r[0]:n.__k&&I(n,0),l,c),r!=null)for(_=r.length;_--;)Ye(r[_]);l||(_="value",A==="progress"&&g==null?t.removeAttribute("value"):g!==void 0&&(g!==t[_]||A==="progress"&&!g||A==="option"&&g!==L[_])&&J(t,_,g,L[_],o),_="checked",D!==void 0&&D!==t[_]&&J(t,_,D,L[_],o))}return t}function ke(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(o){p.__e(o,n)}}function Ze(t,e,n){var i,o;if(p.unmount&&p.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||ke(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){p.__e(r,e)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&Ze(i[o],e,n||typeof t.type!="function");n||Ye(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function gt(t,e,n){return this.constructor(t,n)}function le(t,e,n){var i,o,r,a;p.__&&p.__(t,e),o=(i=typeof n=="function")?null:e.__k,r=[],a=[],Ae(e,t=(!i&&n||e).__k=pt(se,null,[t]),o||j,j,e.namespaceURI,!i&&n?[n]:o?null:e.firstChild?ue.call(e.childNodes):null,r,!i&&n?n:o?o.__e:e.firstChild,i,a),Ke(r,t,a)}ue=qe.slice,p={__e:function(t,e,n,i){for(var o,r,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(t)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,i||{}),a=o.__d),a)return o.__E=o}catch(l){t=l}throw t}},Ve=0,Ge=function(t){return t!=null&&t.constructor==null},q.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof t=="function"&&(t=t(C({},n),this.props)),t&&C(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Pe(this))},q.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Pe(this))},q.prototype.render=se,N=[],Be=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,de=function(t,e){return t.__v.__b-e.__v.__b},ne.__r=0,Se=0,ve=Ee(!1),he=Ee(!0);var At=0;function s(t,e,n,i,o,r){e||(e={});var a,l,c=e;if("ref"in c)for(l in c={},e)l=="ref"?a=e[l]:c[l]=e[l];var _={type:t,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--At,__i:-1,__u:0,__source:o,__self:r};if(typeof t=="function"&&(a=t.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return p.vnode&&p.vnode(_),_}const H=class H{static NoteOn(e,n,i){return[H.NoteOnCode|e-1,n,i]}static NoteOff(e,n,i){return[H.NoteOffCode|e-1,n,i]}};R(H,"NoteOnCode",144),R(H,"NoteOffCode",128);let b=H;function Je(t,e){if(t!==void 0)for(const n of t.outputs){const i=n[1];if(i.name===e)return i}}async function kt(t,e,n){await t.open(),new un(e).sendCommands(t,n)}var ie,O,ce,Ce,pe=0,Xe=[],k=p,Ne=k.__b,$e=k.__r,Re=k.diffed,He=k.__c,Fe=k.unmount,Ie=k.__;function et(t,e){k.__h&&k.__h(O,t,pe||e),pe=0;var n=O.__H||(O.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function bt(t,e){var n=et(ie++,3);!k.__s&&tt(n.__H,e)&&(n.__=t,n.i=e,O.__H.__h.push(n))}function Lt(t){return pe=5,be(function(){return{current:t}},[])}function be(t,e){var n=et(ie++,7);return tt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function xt(){for(var t;t=Xe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(te),t.__H.__h.forEach(ye),t.__H.__h=[]}catch(e){t.__H.__h=[],k.__e(e,t.__v)}}k.__b=function(t){O=null,Ne&&Ne(t)},k.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ie&&Ie(t,e)},k.__r=function(t){$e&&$e(t),ie=0;var e=(O=t.__c).__H;e&&(ce===O?(e.__h=[],O.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(te),e.__h.forEach(ye),e.__h=[],ie=0)),ce=O},k.diffed=function(t){Re&&Re(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Xe.push(e)!==1&&Ce===k.requestAnimationFrame||((Ce=k.requestAnimationFrame)||Ot)(xt)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),ce=O=null},k.__c=function(t,e){e.some(function(n){try{n.__h.forEach(te),n.__h=n.__h.filter(function(i){return!i.__||ye(i)})}catch(i){e.some(function(o){o.__h&&(o.__h=[])}),e=[],k.__e(i,n.__v)}}),He&&He(t,e)},k.unmount=function(t){Fe&&Fe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{te(i)}catch(o){e=o}}),n.__H=void 0,e&&k.__e(e,n.__v))};var Ue=typeof requestAnimationFrame=="function";function Ot(t){var e,n=function(){clearTimeout(i),Ue&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);Ue&&(e=requestAnimationFrame(n))}function te(t){var e=O,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),O=e}function ye(t){var e=O;t.__c=t.__(),O=e}function tt(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}var Mt=Symbol.for("preact-signals");function Le(){if(F>1)F--;else{for(var t,e=!1;Y!==void 0;){var n=Y;for(Y=void 0,me++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&it(n))try{n.c()}catch(o){e||(t=o,e=!0)}n=i}}if(me=0,F--,e)throw t}}var y=void 0,Y=void 0,F=0,me=0,oe=0;function nt(t){if(y!==void 0){var e=t.n;if(e===void 0||e.t!==y)return e={i:0,S:t,p:y.s,n:void 0,t:y,e:void 0,x:void 0,r:e},y.s!==void 0&&(y.s.n=e),y.s=e,t.n=e,32&y.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=y.s,e.n=void 0,y.s.n=e,y.s=e),e}}function x(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}x.prototype.brand=Mt;x.prototype.h=function(){return!0};x.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};x.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};x.prototype.subscribe=function(t){var e=this;return Oe(function(){var n=e.value,i=y;y=void 0;try{t(n)}finally{y=i}})};x.prototype.valueOf=function(){return this.value};x.prototype.toString=function(){return this.value+""};x.prototype.toJSON=function(){return this.value};x.prototype.peek=function(){var t=y;y=void 0;try{return this.value}finally{y=t}};Object.defineProperty(x.prototype,"value",{get:function(){var t=nt(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(me>100)throw new Error("Cycle detected");this.v=t,this.i++,oe++,F++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Le()}}}});function $(t){return new x(t)}function it(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function ot(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function rt(t){for(var e=t.s,n=void 0;e!==void 0;){var i=e.p;e.i===-1?(e.S.U(e),i!==void 0&&(i.n=e.n),e.n!==void 0&&(e.n.p=i)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=i}t.s=n}function U(t){x.call(this,void 0),this.x=t,this.s=void 0,this.g=oe-1,this.f=4}(U.prototype=new x).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===oe))return!0;if(this.g=oe,this.f|=1,this.i>0&&!it(this))return this.f&=-2,!0;var t=y;try{ot(this),y=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return y=t,rt(this),this.f&=-2,!0};U.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}x.prototype.S.call(this,t)};U.prototype.U=function(t){if(this.t!==void 0&&(x.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};U.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(U.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=nt(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ut(t){return new U(t)}function st(t){var e=t.u;if(t.u=void 0,typeof e=="function"){F++;var n=y;y=void 0;try{e()}catch(i){throw t.f&=-2,t.f|=8,xe(t),i}finally{y=n,Le()}}}function xe(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,st(t)}function Tt(t){if(y!==this)throw new Error("Out-of-order effect");rt(this),y=t,this.f&=-2,8&this.f&&xe(this),Le()}function z(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}z.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};z.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,st(this),ot(this),F++;var t=y;return y=this,Tt.bind(this,t)};z.prototype.N=function(){2&this.f||(this.f|=2,this.o=Y,Y=this)};z.prototype.d=function(){this.f|=8,1&this.f||xe(this)};function Oe(t){var e=new z(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var _e;function W(t,e){p[t]=e.bind(null,p[t]||function(){})}function re(t){_e&&_e(),_e=t&&t.S()}function at(t){var e=this,n=t.data,i=Pt(n);i.value=n;var o=be(function(){for(var r=e.__v;r=r.__;)if(r.__c){r.__c.__$f|=4;break}return e.__$u.c=function(){var a;!Ge(o.peek())&&((a=e.base)==null?void 0:a.nodeType)===3?e.base.data=o.peek():(e.__$f|=1,e.setState({}))},ut(function(){var a=i.value.value;return a===0?0:a===!0?"":a||""})},[]);return o.value}at.displayName="_st";Object.defineProperties(x.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:at},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});W("__b",function(t,e){if(typeof e.type=="string"){var n,i=e.props;for(var o in i)if(o!=="children"){var r=i[o];r instanceof x&&(n||(e.__np=n={}),n[o]=r,i[o]=r.peek())}}t(e)});W("__r",function(t,e){re();var n,i=e.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=function(o){var r;return Oe(function(){r=this}),r.c=function(){i.__$f|=1,i.setState({})},r}())),re(n),t(e)});W("__e",function(t,e,n,i){re(),t(e,n,i)});W("diffed",function(t,e){re();var n;if(typeof e.type=="string"&&(n=e.__e)){var i=e.__np,o=e.props;if(i){var r=n.U;if(r)for(var a in r){var l=r[a];l!==void 0&&!(a in i)&&(l.d(),r[a]=void 0)}else n.U=r={};for(var c in i){var _=r[c],d=i[c];_===void 0?(_=Dt(n,c,d,o),r[c]=_):_.o(d,o)}}}t(e)});function Dt(t,e,n,i){var o=e in t&&t.ownerSVGElement===void 0,r=$(n);return{o:function(a,l){r.value=a,i=l},d:Oe(function(){var a=r.value.value;i[e]!==a&&(i[e]=a,o?t[e]=a:a?t.setAttribute(e,a):t.removeAttribute(e))})}}W("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var o in i){var r=i[o];r&&r.d()}}}}else{var a=e.__c;if(a){var l=a.__$u;l&&(a.__$u=void 0,l.d())}}t(e)});W("__h",function(t,e,n,i){(i<3||i===9)&&(e.__$f|=2),t(e,n,i)});q.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var i in e)return!0;for(var o in t)if(o!=="__source"&&t[o]!==this.props[o])return!0;for(var r in this.props)if(!(r in t))return!0;return!1};function Pt(t){return be(function(){return $(t)},[])}function*wt(t,e){let n=0;if(e.AttackTics===0)yield{...t,value:e.Amount},n++;else{const i=e.Amount/e.AttackTics|0;yield{...t,value:i},n++,e.AttackTics>1&&(yield h.REP(e.AttackTics-1),n++)}if(e.DecayTics===0)yield{...t,value:T(e.Amount)},n++;else{const i=e.Amount/e.DecayTics|0;yield{...t,value:T(i)},n++,e.DecayTics>1&&(n++,yield h.REP(e.DecayTics-1))}e.Loop?yield h.HOP(0):yield h.HOP(n)}function*Et(t,e){let n=0;if(e.AttackTics===0)yield{...t,value:e.Amount},n++;else{const o=e.Amount/e.AttackTics|0;yield{...t,value:o},n++,e.AttackTics>1&&(yield h.REP(e.AttackTics-1),n++)}const i=e.Amount-e.SustainLevel;if(e.DecayTics===0)yield{...t,value:T(i)},n++;else{const o=i/e.DecayTics|0;yield{...t,value:T(o)},n++,e.DecayTics>1&&(n++,yield h.REP(e.DecayTics-1))}if(yield h.DEL(e.SustainTics),n++,e.ReleaseTics>0){const o=e.SustainLevel/e.ReleaseTics|0;yield{...t,value:T(o)},n++,e.ReleaseTics>1&&(n++,yield h.REP(e.ReleaseTics-1))}else yield{...t,value:T(e.SustainLevel)},n++;e.Loop?yield h.HOP(0):yield h.HOP(n)}function T(t){return(255-t+1)%256}function*Ct(t,e){const n=e.Duration/4|0,i=e.Duration/2|0,o=e.Amount/(e.Duration/2)|0;let r=3;yield{...t,value:o},n>1&&(yield h.REP(n-1),r++),yield{...t,value:T(o)},i>1&&(yield h.REP(i-1),r++),yield{...t,value:o},n>1&&(yield h.REP(n-1),r++),e.Loop?yield h.HOP(0):yield h.HOP(r)}function*Nt(t,e){const n=e.Duration/2|0;let i=1;yield{...t,value:e.Amount/2|0},n>1&&(yield h.DEL(n-1),i++),i++,yield{...t,value:T(e.Amount)},n>1&&(i++,yield h.DEL(n-1)),i++,yield{...t,value:e.Amount},n>1&&(i++,yield h.DEL(n-1)),e.Loop?yield h.HOP(n>1?2:1):yield h.HOP(i)}function*$t(t,e){let n=2;const i=e.Amount/e.Duration|0;yield{...t,value:i},e.Duration>1&&(yield h.REP(e.Duration),n++),e.Loop?(yield{...t,value:T(e.Amount)},yield h.HOP(0)):yield h.HOP(n)}function*Rt(t,e){let n=2;const i=e.Amount/e.Duration|0;yield{...t,value:e.Amount},yield{...t,value:T(i)},e.Duration>1&&(yield h.REP(e.Duration),n++),e.Loop?yield h.HOP(0):yield h.HOP(n)}function*Ht(t,e){let n=0;for(const i of e.Segments)if(i.TicDuration<=1)yield{...t,value:i.Amount<0?T(i.Amount):i.Amount|0},n++;else if(i.Amount!==0){const r=(i.Amount<0?Math.abs(i.Amount):i.Amount)/i.TicDuration|0,a=i.Amount<0?T(r):r;yield{...t,value:a},yield h.REP(i.TicDuration-1),n+=2}else yield h.DEL(i.TicDuration);e.Loop?yield h.HOP(0):yield h.HOP(n)}function Ft(t,e){switch(e.kind){case"ad_env":return wt(t,e.def);case"adsr_env":return Et(t,e.def);case"tri_lfo":return Ct(t,e.def);case"square_lfo":return Nt(t,e.def);case"ramp_up_lfo":return $t(t,e.def);case"ramp_down_lfo":return Rt(t,e.def);case"free":return Ht(t,e.def);default:Me()}}const It={free:0,ad_env:1,adsr_env:2,tri_lfo:3,square_lfo:4,ramp_up_lfo:5,ramp_down_lfo:6};function lt(t){switch(t){case 1:return{kind:"ad_env",def:{AttackTics:0,DecayTics:10,Amount:48,Loop:!1}};case 2:return{kind:"adsr_env",def:{AttackTics:7,DecayTics:5,SustainTics:29,ReleaseTics:8,SustainLevel:59,Amount:80,Loop:!1}};case 3:return{kind:"tri_lfo",def:{Duration:40,Amount:62,Loop:!0}};case 4:return{kind:"square_lfo",def:{Duration:40,Amount:62,Loop:!0}};case 5:return{kind:"ramp_up_lfo",def:{Duration:22,Amount:77,Loop:!0}};case 6:return{kind:"ramp_down_lfo",def:{Duration:22,Amount:47,Loop:!0}};case 0:default:return{kind:"free",def:{Segments:[{Amount:40,TicDuration:10}],Loop:!1}}}}function ct(t){const e=$(h.CUT(80)),n=$(lt(2)),i=ut(()=>[...Ft(e.value,n.value)]);return{current_instrument:$("MA"),current_parameter:e,current_macro:n,script:i,midi:t,m8Channel:$(10),m8port:$(void 0)}}function Me(t){throw"never"}const Ut={SIZ:{x:4,y:4,relative:!0},MUL:{x:5,y:4,relative:!0},WRP:{x:6,y:4,relative:!0},SCN:{x:7,y:4,relative:!0}},Wt={FM1:{x:4,y:4,relative:!0},FM2:{x:5,y:4,relative:!0},FM3:{x:6,y:4,relative:!0},FM4:{x:7,y:4,relative:!0}},Vt={SHF:{x:4,y:4,relative:!0},SWM:{x:5,y:4,relative:!0},WID:{x:6,y:4,relative:!0},SUB:{x:7,y:4,relative:!0}},Gt={PLY:{x:3,y:4,relative:!1},STA:{x:4,y:4,relative:!1},LOP:{x:5,y:4,relative:!1},LEN:{x:6,y:4,relative:!1},DEG:{x:7,y:4,relative:!1},SLI:{x:6,y:5,relative:!1}},Bt={TBR:{x:4,y:4,relative:!0},COL:{x:5,y:4,relative:!0},DEG:{x:6,y:4,relative:!0},RED:{x:7,y:4,relative:!0}},qt={DEL:{x:3,y:0,relative:!1},HOP:{x:5,y:0,relative:!1},RET:{x:0,y:1,relative:!1},REP:{x:1,y:1,relative:!1},RTO:{x:2,y:1,relative:!1},TIC:{x:6,y:2,relative:!1}},Yt={VOL:{x:0,y:4,relative:!0},PIT:{x:1,y:4,relative:!0},FIN:{x:2,y:4,relative:!0},CUT:{x:1,y:5,relative:!0},RES:{x:2,y:5,relative:!0},AMP:{x:3,y:5,relative:!0},PAN:{x:5,y:5,relative:!0},DRY:{x:0,y:6,relative:!1},SCH:{x:1,y:6,relative:!1},SDL:{x:2,y:6,relative:!1},SRV:{x:3,y:6,relative:!1}},jt={SIZ:{ty:"WAV",code:"SIZ",value:0},MUL:{ty:"WAV",code:"MUL",value:0},WRP:{ty:"WAV",code:"WRP",value:0},SCN:{ty:"WAV",code:"SCN",value:0}},zt={FM1:{ty:"FM",code:"FM1",value:0},FM2:{ty:"FM",code:"FM2",value:0},FM3:{ty:"FM",code:"FM3",value:0},FM4:{ty:"FM",code:"FM4",value:0}},Qt={SHF:{ty:"HS",code:"SHF",value:0},SWM:{ty:"HS",code:"SWM",value:0},WID:{ty:"HS",code:"WID",value:0},SUB:{ty:"HS",code:"SUB",value:0}},Kt={PLY:{ty:"SA",code:"PLY",value:0},STA:{ty:"SA",code:"STA",value:0},LOP:{ty:"SA",code:"LOP",value:0},LEN:{ty:"SA",code:"LEN",value:0},DEG:{ty:"SA",code:"DEG",value:0},SLI:{ty:"SA",code:"SLI",value:0}},Zt={TBR:{ty:"MA",code:"TBR",value:0},COL:{ty:"MA",code:"COL",value:0},DEG:{ty:"MA",code:"DEG",value:0},RED:{ty:"MA",code:"RED",value:0}},B={VOL:{ty:"GLO",code:"VOL",value:0},PIT:{ty:"GLO",code:"PIT",value:0},FIN:{ty:"GLO",code:"FIN",value:0},CUT:{ty:"GLO",code:"CUT",value:0},RES:{ty:"GLO",code:"RES",value:0},AMP:{ty:"GLO",code:"AMP",value:0},PAN:{ty:"GLO",code:"PAN",value:0},DRY:{ty:"GLO",code:"DRY",value:0},SCH:{ty:"GLO",code:"SCH",value:0},SDL:{ty:"GLO",code:"SDL",value:0},SRV:{ty:"GLO",code:"SRV",value:0}},_t={WAV:"Wavsynth",MA:"Macrosynth",HS:"Hypersynth",SA:"Sampler",FM:"FM Synth"};function Jt(t){const e=t.ty;switch(e){case"SEQ":return"Sequencer";case"GLO":return"Global";default:return _t[e]}}class h{static DEL(e){return{ty:"SEQ",code:"DEL",value:e}}static REP(e){return{ty:"SEQ",code:"REP",value:e}}static HOP(e){return{ty:"SEQ",code:"HOP",value:e}}static CUT(e){return{ty:"GLO",code:"CUT",value:e}}}function*w(t){for(let e in t)yield t[e]}const Xt={WAV:[[...w(jt)],[...w(B)]],FM:[[...w(zt)],[...w(B)]],MA:[[...w(Zt)],[...w(B)]],HS:[[...w(Qt)],[...w(B)]],SA:[[...w(Kt)],[...w(B)]]};function en(t,e,n){let i=0,o=0,r=e,a=0;const l=3,c=2,_=t.canvas.clientHeight,d=m=>{t.fillRect(o*l,_-m,l,c)},u=t.canvas.clientWidth/l;for(;i<n.length&&!(o>=u);){const m=n[i];switch(m.code){case"REP":for(let g=0;g<m.value&&!(o>=u);g++)r=Math.min(255,Math.max(0,r+a)),d(r),o++;break;case"DEL":for(let g=0;g<m.value&&!(o>=u);g++)d(r),o++;break;case"HOP":m.value===i&&(d(r),o++),i=m.value-1;break;default:const f=m.value>128?-(~m.value+1&255):m.value;r=f+r,r=Math.min(255,Math.max(0,r)),d(r),a=f,o++;break}i++}for(;o<u;)d(r),o++}function tn(t){switch(t.ty){case"SEQ":return qt[t.code];case"GLO":return Yt[t.code];case"WAV":return Ut[t.code];case"FM":return Wt[t.code];case"MA":return Bt[t.code];case"HS":return Vt[t.code];case"SA":return Gt[t.code];default:return Me()}}function*nn(){for(let t=0;t<7;t++)yield 4,yield 4;for(let t=0;t<15;t++)yield 6,yield 6}function*on(t){yield 2,yield 3,yield 2,yield 3,yield 2;const e=(t/16|0)*2;for(let i=0;i<e;i++)yield 6;const n=(t&15)*2;for(let i=0;i<n;i++)yield 5;yield 2}function*rn(t){const e={x:0,y:0};let n=!0;for(const i of t){const o=tn(i),r=o.x-e.x,a=o.y-e.y,l=r<0?4:5,c=a<0?6:7;yield 2,yield 6,yield 6,n&&(yield*nn(),n=!1);const _=Math.abs(r);for(let u=0;u<2*_;u++)yield l;const d=Math.abs(a);for(let u=0;u<2*d;u++)yield c;yield 2,yield 5,yield 5,yield*on(i.value),yield 4,yield 4,yield 7,yield 7,e.x=o.x,e.y=o.y}}class un{constructor(e){R(this,"NoteOns");R(this,"NoteOffs");R(this,"keyStates");this.controlChannel=e,this.keyStates=[!1,!1,!1,!1,!1,!1,!1,!1],this.NoteOns=[b.NoteOn(e,0,1),b.NoteOn(e,1,1),b.NoteOn(e,2,1),b.NoteOn(e,3,1),b.NoteOn(e,4,1),b.NoteOn(e,5,1),b.NoteOn(e,6,1),b.NoteOn(e,7,1)],this.NoteOffs=[b.NoteOff(e,0,0),b.NoteOff(e,1,0),b.NoteOff(e,2,0),b.NoteOff(e,3,0),b.NoteOff(e,4,0),b.NoteOff(e,5,0),b.NoteOff(e,6,0),b.NoteOff(e,7,0)]}sendCommands(e,n){this.sendUserCommands(e,rn(n))}sendUserCommands(e,n){let i=0;const o=23;for(const r of n){const a=this.keyStates[r],l=a?this.NoteOffs:this.NoteOns;this.keyStates[r]=!a,e.send(l[r],window.performance.now()+i*o),i++}}}let v=ct(void 0);function M(t){const e=o=>{const r=Number.parseInt(o,10);t.update(r)},n=t.max===void 0?255:t.max,i=t.min===void 0?0:t.min;return s("div",{class:"valueEdit",children:[s("label",{children:t.name}),s("br",{}),s("input",{type:"range",min:i,max:n,onInput:o=>e(o.currentTarget.value),value:t.val}),s("input",{type:"number",min:i,max:n,onInput:o=>e(o.currentTarget.value),value:t.val})]})}function sn(t){const e=t.def;return s("form",{children:[s("h3",{children:t.name}),s(M,{name:"Attack (tics)",val:e.AttackTics,update:n=>t.update({...e,AttackTics:n})}),s(M,{name:"Decay (tics)",val:e.DecayTics,update:n=>t.update({...e,DecayTics:n})}),s(M,{name:"Amount",val:e.Amount,update:n=>t.update({...e,Amount:n})}),s("label",{children:"Loop"}),s("input",{type:"checkbox",checked:e.Loop,onInput:n=>t.update({...e,Loop:!e.Loop})})]})}function an(t){const e=t.def;return s("form",{children:[s("h3",{children:t.name}),s(M,{name:"Amount",val:e.Amount,update:n=>t.update({...e,Amount:n})}),s(M,{name:"Attack (tics)",val:e.AttackTics,update:n=>t.update({...e,AttackTics:n})}),s(M,{name:"Decay (tics)",val:e.DecayTics,update:n=>t.update({...e,DecayTics:n})}),s(M,{name:"Sustain (tics)",val:e.SustainTics,update:n=>t.update({...e,SustainTics:n})}),s(M,{name:"Sustain Amount",val:e.SustainLevel,update:n=>t.update({...e,SustainLevel:n})}),s(M,{name:"Release (tics)",val:e.ReleaseTics,update:n=>t.update({...e,ReleaseTics:n})}),s("label",{children:"Loop"}),s("input",{type:"checkbox",checked:e.Loop,onInput:n=>t.update({...e,Loop:!e.Loop})})]})}function X(t){const e=t.def;return s("form",{children:[s("h3",{children:t.name}),s(M,{name:"Duration (tics)",val:e.Duration,update:n=>t.update({...e,Duration:n})}),s(M,{name:"Amount",val:e.Amount,update:n=>t.update({...e,Amount:n}),max:t.maxAmount}),s("label",{children:"Loop"}),s("input",{type:"checkbox",checked:e.Loop,onInput:n=>t.update({...e,Loop:!e.Loop})})]})}function ln(t){const e=t.seg;return s("form",{class:"segmentedit",children:[s(M,{name:"Duration (tics)",val:e.TicDuration,update:n=>t.update({...e,TicDuration:n})}),s(M,{name:"Amount",val:e.Amount,min:-128,max:127,update:n=>t.update({...e,Amount:n})}),s("button",{title:"Remove segment",onClick:()=>t.remove(),children:"Remove"})]})}function cn(t){const e=t.def,n=()=>t.update({...e,Segments:[...e.Segments,{Amount:10,TicDuration:10}]}),i=e.Segments.map((o,r)=>s(ln,{seg:o,update:c=>{const _=[...e.Segments];_[r]=c,t.update({...e,Segments:_})},remove:()=>{const c=[...e.Segments];c.splice(r,1),t.update({...e,Segments:c})}}));return s("div",{children:[s("h3",{children:t.name}),s("div",{class:"segmentList",children:i}),s("button",{title:"Add a segment",onClick:o=>n(),children:"+"}),s("label",{children:"Loop"}),s("input",{type:"checkbox",checked:e.Loop,onInput:o=>t.update({...e,Loop:!e.Loop})})]})}function We(t){const e=t.toString(16);return e.length<2?"0"+e:e}function _n(t,e){const n=`${We(t)} : ${e.code} ${We(e.value)}
`;return t===15?s("span",{class:"warncolor",title:"Beware approaching instruction count limit...",children:n}):t>15?s("span",{class:"errorcolor",title:"Out of bound instruction, cannot be executed.",children:n}):n}function fn(){const t=v.script.value;return s("pre",{children:t.map((e,n)=>_n(n,e))})}function dn(){const t=v.current_macro.value;switch(t.kind){case"free":return s(cn,{name:"Free form",def:t.def,update:n=>v.current_macro.value={...t,def:n}});case"ad_env":return s(sn,{name:"Attack Decay Enveloppe",def:t.def,update:n=>v.current_macro.value={...t,def:n}});case"adsr_env":return s(an,{name:"ADSR Enveloppe",def:t.def,update:n=>v.current_macro.value={...t,def:n}});case"tri_lfo":return s(X,{name:"Triangle LFO",def:t.def,update:n=>v.current_macro.value={...t,def:n}});case"square_lfo":return s(X,{name:"Square LFO",def:t.def,maxAmount:127,update:n=>v.current_macro.value={...t,def:n}});case"ramp_up_lfo":return s(X,{name:"Ramp UP LFO",def:t.def,update:n=>v.current_macro.value={...t,def:n}});case"ramp_down_lfo":return s(X,{name:"Ramp Down LFO",def:t.def,update:n=>v.current_macro.value={...t,def:n}});default:Me()}}function vn(){const t=It[v.current_macro.value.kind],e=o=>{v.current_macro.value=lt(o)},n=["Free","Attack Decay Env","ADSR Env","Triangle LFO","Square LFO","Ramp up LFO","Ramp down LFO"],i=(o,r)=>s("div",{children:s("label",{children:[s("input",{type:"radio",checked:t===r,onInput:a=>e(r)}),o]})});return s("div",{children:n.map(i)})}function hn(){const t=Lt(null),e=v.script.value,n=v.current_parameter.value;return bt(()=>{const i=t.current;if(i===null)return;const o=i.getContext("2d");if(o===null)return;const r=o.canvas.clientWidth,a=o.canvas.clientHeight;o.clearRect(0,0,r,a),o.fillStyle="#555";for(var l=1;l<255;l+=16)o.fillRect(0,l,r,1);o.fillStyle="#080",o.fillRect(0,255-n.value,r,2),o.fillStyle="#fff",en(o,n.value,e)},[e]),s("div",{children:s("canvas",{class:"visualization",ref:t,width:640,height:258})})}function pn(){const t=v.current_instrument.value,e=n=>s("div",{children:s("label",{children:[s("input",{type:"radio",value:n,checked:n===t,onInput:i=>v.current_instrument.value=n}),_t[n]]})});return s("div",{children:[e("WAV"),e("MA"),e("HS"),e("SA"),e("FM")]})}function yn(){const t=v.current_instrument.value,e=v.current_parameter.value,n=Xt[t];let i=[];const o=c=>{const _=Number.parseInt(c,10),d=i[_];v.current_parameter.value={...d,value:e.value}};let r=0;const a=c=>(i.push(c),s("option",{value:r++,selected:e.code===c.code,children:[" ",c.code," "]})),l=n.map(c=>s("optgroup",{label:Jt(c[0]),children:c.map(a)}));return s("select",{size:20,onChange:c=>o(c.currentTarget.value),children:l})}function mn(){const t=v.current_parameter.value;return s(M,{name:"Amount",val:t.value,update:e=>v.current_parameter.value={...t,value:e}})}function ft(){if(v.midi===void 0)return;const t=Je(v.midi,"M8");v.m8port.value=t==null?void 0:t.id}function Sn(){const t=v.m8Channel.value,e=v.m8port.value;if(v.midi===void 0)return s("div",{class:"message",children:"No midi allowed, cannot write to M8, grant MIDI rights and refresh page"});const n=e===void 0?"No connected M8 found":"M8 OK, put cursor in an instrument table for writing.",i=o=>{const r=Number.parseInt(o,10);v.m8Channel.value=r};return s("div",{class:"message",children:[s("span",{class:"midistatus",children:n}),s("span",{class:"separator"}),s("label",{children:[s("span",{class:"midistatus",children:"M8 control channel : "}),s("input",{type:"number",min:"1",max:"16",title:"M8 Midi control channel (10 by default)",value:t,onInput:o=>i(o.currentTarget.value)})]}),s("span",{class:"separator"}),s("button",{title:"Search for M8",onClick:o=>ft(),children:"⟳ Refresh M8"})]})}function gn(){const t=Je(v.midi,"M8");if(t===void 0){v.m8port.value=void 0,alert("No M8 found, please connect and refresh");return}kt(t,v.m8Channel.peek(),v.script.peek())}function fe(){const t=v.script.value.length>15,e=v.m8port.value===void 0||t;return s("div",{children:[s("div",{class:"rootheader",children:[s("h1",{children:"M8 Table generator"}),s(Sn,{})]}),s("div",{class:"rootcontainer",children:[s("div",{class:"rootcolumn",children:[s("h3",{children:"Generator"}),s(vn,{}),s("h3",{children:"Instrument"}),s(pn,{}),s("h3",{children:"Value"}),s(mn,{}),s(yn,{})]}),s("div",{class:"rootcolumn",children:s(dn,{})}),s("div",{class:"rootcolumn",children:[s("h3",{children:"M8 'script'"}),s(fn,{}),s(hn,{}),s("div",{children:[s("button",{disabled:e,onClick:n=>gn(),children:"M8 write"}),t?"Your script is too long and can't be executed on a M8":""]})]})]})]})}try{navigator.requestMIDIAccess().then(t=>{v=ct(t),ft(),le(s(fe,{}),document.getElementById("app"))},t=>{le(s(fe,{}),document.getElementById("app"))})}catch{document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("app");le(s(fe,{}),t)},!1)}
